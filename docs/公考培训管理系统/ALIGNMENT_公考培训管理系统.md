# 对齐文档 - 公考培训机构管理系统

## 文档信息
- **创建日期**：2026-01-27
- **文档版本**：v1.0
- **任务阶段**：Align（对齐阶段）

---

## 1. 项目上下文分析

### 1.1 现有项目状态
- **代码状态**：全新项目，尚未开始编码
- **文档状态**：已有完整的PRD文档、业务流程图、AI提示词集合、实施说明
- **技术栈选型**：PRD已确定 Python Flask + SQLAlchemy + Bootstrap 5

### 1.2 业务域理解
- **业务类型**：公务员考试培训机构内部管理系统
- **用户群体**：机构员工（4人）+ 学员（约30人）
- **核心业务**：学员督学管理、作业跟踪、课程安排、数据分析

### 1.3 项目特性规范
| 特性 | 规范 |
|------|------|
| 用户规模 | 30-100人（可扩展） |
| 并发要求 | 50人同时在线 |
| 响应时间 | 页面加载 < 2秒，API < 500ms |
| 数据安全 | 密码加密、JWT认证、每日备份 |

---

## 2. 原始需求摘要

### 2.1 核心目标
1. 将督学效率提升50%以上
2. 实现学员学习数据100%记录和可追溯
3. 降低人员流动带来的信息丢失风险
4. 提升学员服务满意度和学习效果

### 2.2 核心功能模块（按PRD）
1. **学员管理** - 学员档案、学情档案、薄弱项标签
2. **督学服务** - 督学工作台、督学日志、心态跟踪
3. **作业管理** - 作业发布、完成跟踪、错题分析
4. **课程管理** - 课程日历、课堂记录、出勤统计
5. **教师管理** - 教师档案、课时统计、课酬计算
6. **打卡进度** - 每日打卡、进度预警
7. **数据分析** - 数据看板、预警系统

### 2.3 PRD建议的第一期范围（MVP）
- ✅ 用户登录与权限
- ✅ 学员档案管理
- ✅ 学情档案记录
- ✅ 督学日志记录
- ✅ 作业发布与跟踪
- ✅ 督学工作台
- ❌ 课程管理（第二期）
- ❌ 数据看板（第二期）
- ❌ 微信小程序（第三期）

---

## 3. 边界确认

### 3.1 本次任务范围
**包含**：
- 第一期MVP功能的完整开发
- 管理后台（Web端）
- 学员端简单表单（H5）

**不包含**：
- 财务管理系统
- 在线授课平台
- 题库做题系统
- 微信小程序

### 3.2 技术边界
- **数据库**：开发环境使用SQLite，生产环境可迁移PostgreSQL
- **前端**：不使用React/Vue等前端框架，使用Bootstrap+jQuery保持简单
- **部署**：先本地开发验证，后续再部署到云服务器

---

## 4. 需求理解

### 4.1 用户角色理解

| 角色 | 权限级别 | 主要使用场景 |
|------|---------|------------|
| 管理员 | 最高 | 管理所有数据、查看报表、系统配置 |
| 督学人员 | 中等 | 日常督学工作、记录沟通、布置作业 |
| 学员 | 基础 | 查看任务、提交作业、打卡 |

### 4.2 核心业务流程理解

**督学日常流程**：
1. 督学登录 → 查看工作台 → 获取待跟进学员列表
2. 联系学员 → 记录督学日志 → 标记跟进完成
3. 布置作业 → 跟踪完成情况 → 统计分析

**作业流程**：
1. 督学发布作业 → 学员收到通知
2. 学员完成作业 → 提交完成情况（题数、正确数、用时）
3. 系统自动统计 → 标记薄弱项 → 生成分析报告

### 4.3 数据库设计理解
PRD已提供详细的数据库设计，包含10个核心表：
- users（用户表）
- students（学员表）
- weakness_tags（薄弱项标签）
- supervision_logs（督学记录）
- homework_tasks（作业任务）
- homework_submissions（作业提交）
- courses（课程）
- class_records（课堂记录）
- teachers（教师）
- study_checkins（学习打卡）

---

## 5. 疑问澄清（需确认事项）

### 🔴 高优先级（影响架构和范围）

#### Q1: 第一期功能范围确认
PRD建议的MVP范围是否确认？是否有调整？
- 学员管理、督学日志、作业跟踪、督学工作台
- 暂不做课程管理和数据看板

#### Q2: 学员端实现方式
第一期学员提交作业的方式：
- 选项A：使用第三方表单（金数据/腾讯问卷）
- 选项B：开发简单的H5页面
- 选项C：先用微信手动收集，后续再开发

#### Q3: 现有数据迁移
是否需要将现有Excel中的学员数据导入系统？
- 如需要，请提供Excel的格式样例

### 🟡 中优先级（影响功能设计）

#### Q4: 通知提醒方式
系统提醒（作业发布、督学提醒等）如何发送给学员？
- 选项A：仅系统内消息，学员登录后查看
- 选项B：通过微信群/私聊手动通知
- 选项C：接入微信公众号/服务号推送（需开发）

#### Q5: 薄弱项标签的知识点体系
PRD中的知识点分类体系（行测5大模块、申论5类题型）是否完整？
是否需要补充其他分类？

#### Q6: 督学人员分配规则
一个学员只能分配给一个督学人员，还是可以多个？

### 🟢 低优先级（影响细节实现）

#### Q7: 权限粒度
督学人员是否只能看到自己负责的学员？还是可以看到所有学员？

#### Q8: 作业正确率计算
学员提交作业时是否需要记录具体错题编号？还是只记录正确数量？

#### Q9: 历史数据保留
督学记录、作业记录等历史数据需要保留多长时间？

---

## 6. 基于文档的初步解答

根据PRD文档内容，我对部分问题的初步理解：

| 问题 | 初步解答（待确认）|
|------|-----------------|
| Q1 范围 | PRD明确建议第一期做MVP，不含课程管理和看板 |
| Q2 学员端 | PRD建议"第一阶段用金数据/腾讯问卷表单" |
| Q4 通知方式 | PRD提到"通过微信群/私聊发送作业链接" |
| Q6 分配规则 | 数据库设计中supervisor_id是单值，即一对一 |
| Q7 权限粒度 | PRD明确"督学人员仅能查看自己负责的学员" |
| Q8 错题记录 | PRD设计了wrong_questions字段存储错题编号 |

---

## 7. 下一步

### 待办事项
1. ⏳ 等待用户确认上述疑问
2. ⏳ 根据确认结果更新文档
3. ⏳ 生成 CONSENSUS（共识文档）
4. ⏳ 进入 Architect（架构阶段）

---

## 8. 确认结果（2026-01-27）

### 已确认事项

| 问题 | 用户回复 | 最终决策 |
|------|---------|---------|
| Q1 第一期范围 | 确认，使用GitHub现成登录源码 | MVP范围确认，用户认证使用Flask-Login等成熟方案 |
| Q2 学员端 | C - 微信手动收集 | 第一期不开发学员端，微信手动收集作业完成情况 |
| Q3 数据迁移 | 需要，提供了泗洪校区.xlsx | 需导入26个学员+4个教师+题型分类+刷题记录 |
| Q4 通知方式 | B - 微信群/私聊手动转发 | 系统内消息+微信手动转发 |
| Q5 开发环境 | Mac | 按Mac环境准备开发说明 |

### Excel数据分析

**泗洪校区.xlsx 包含12个Sheet：**

| Sheet名称 | 行数 | 核心字段 | 导入优先级 |
|----------|------|---------|----------|
| 学员档案管理 | 26人 | 姓名、入学时间、课程类别、联系方式、是否有基础 | ⭐⭐⭐ 高 |
| 教师管理 | 4人 | 教师姓名、负责科目、课酬、联系电话 | ⭐⭐⭐ 高 |
| 题型分类 | 92条 | 一级模块、分类（知识点体系） | ⭐⭐ 中 |
| 每日学员刷题汇总 | 31条 | 日期、学员姓名、刷题总量、正确率 | ⭐⭐ 中 |
| 入帐系统明细 | 41条 | 缴费信息（第一期不导入） | ⭐ 低 |
| 协议班管理 | 47条 | 协议信息（第一期不导入） | ⭐ 低 |

**题型分类体系（从Excel提取）：**
- 常识判断：科技、法律、时事、地理、人文、经济
- 言语理解与表达：篇章阅读、语句表达、逻辑填空、片段阅读
- 数量关系：行程问题、经济利润、比赛计数、几何问题等
- 判断推理：（待补充）
- 资料分析：（待补充）

---

*文档状态：已确认，准备生成共识文档*
