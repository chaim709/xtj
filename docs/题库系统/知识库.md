# 公考知识库 - 完整技术文档

## 一、项目概述

公考知识库是一个面向公务员考试备考的在线知识学习与刷题平台。

| 项目 | 说明 |
|------|------|
| **系统名称** | 公考知识库 (gongkao-zhishiku) |
| **技术栈** | VitePress v1.5.0 + Vue 3 + TypeScript |
| **运行端口** | 5004 (开发环境) |
| **关联系统** | 题库系统 (5003端口) - 通过 iframe 嵌入 |
| **主题风格** | 绿色主题，支持深浅模式切换 |
| **项目类型** | 静态站点 + 动态题库功能 |

---

## 二、系统架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    公考知识库 (5004)                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    VitePress 静态站点                     │   │
│  │  ├── 首页 (Hero + 功能模块导航)                          │   │
│  │  ├── 行测知识 (资料分析/言语理解/数量关系/判断推理)        │   │
│  │  ├── 申论写作 (概括归纳/综合分析/提出对策/公文/大作文)     │   │
│  │  ├── 常识判断 (政治/法律/经济/历史/地理)                  │   │
│  │  └── 公基知识                                            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                    ┌─────────▼─────────┐                        │
│                    │   TikuFrame 组件   │                        │
│                    │   (iframe 嵌入)    │                        │
│                    └─────────┬─────────┘                        │
│                              │                                   │
└──────────────────────────────┼──────────────────────────────────┘
                               │
                    ┌──────────▼──────────┐
                    │   题库系统 (5003)    │
                    │  ├── 专项练习        │
                    │  ├── 错题本          │
                    │  └── 统计分析        │
                    └─────────────────────┘
```

---

## 三、目录结构

```
gongkao-zhishiku/
├── docs/
│   ├── .vitepress/
│   │   ├── config.mts              # VitePress 主配置
│   │   ├── cache/                  # 构建缓存
│   │   └── theme/
│   │       ├── index.ts            # 自定义主题入口
│   │       ├── custom.css          # 全局自定义样式
│   │       └── components/
│   │           └── TikuFrame.vue   # 题库系统嵌入组件
│   │
│   ├── index.md                    # 首页
│   ├── tiku/                       # 题库功能页面
│   │   ├── index.md                # 题库首页
│   │   ├── practice.md             # 专项练习
│   │   ├── mistakes.md             # 错题本
│   │   └── stats.md                # 统计分析
│   │
│   ├── xingce/                     # 行测知识
│   │   ├── ziliao/                 # 资料分析
│   │   │   ├── index.md
│   │   │   └── zengzhang.md        # 增长率计算
│   │   ├── yanyu/                  # 言语理解
│   │   │   └── index.md
│   │   ├── shuliang/               # 数量关系
│   │   │   └── index.md
│   │   └── panduan/                # 判断推理
│   │       └── index.md
│   │
│   ├── shenlun/                    # 申论写作
│   │   └── index.md
│   ├── changshi/                   # 常识判断
│   │   └── index.md
│   ├── gongji/                     # 公基知识
│   │   └── index.md
│   └── utils/                      # 工具页面
│       └── index.md
│
├── package.json                    # 项目配置
└── node_modules/                   # 依赖
```

---

## 四、VitePress 配置

### 4.1 主配置 `docs/.vitepress/config.mts`

```ts
import { defineConfig } from 'vitepress'

export default defineConfig({
  title: "公考知识库",
  description: "行测申论备考指南 - 精准定位，高效备考",
  lang: 'zh-CN',
  
  head: [
    ['link', { rel: 'icon', href: '/favicon.ico' }],
    ['meta', { name: 'theme-color', content: '#3eaf7c' }],
    ['meta', { name: 'keywords', content: '公考,行测,申论,公务员考试,备考指南' }],
  ],

  themeConfig: {
    logo: '/logo.svg',
    siteTitle: '公考知识库',
    
    // 顶部导航栏
    nav: [
      { text: '🏠 首页', link: '/' },
      { 
        text: '🧩 题库',
        items: [
          { text: '📝 专项练习', link: '/tiku/practice' },
          { text: '📕 错题本', link: '/tiku/mistakes' },
          { text: '📊 统计分析', link: '/tiku/stats' },
        ]
      },
      { 
        text: '📚 行测',
        items: [
          { text: '📊 资料分析', link: '/xingce/ziliao/' },
          { text: '📖 言语理解', link: '/xingce/yanyu/' },
          { text: '📏 数量关系', link: '/xingce/shuliang/' },
          { text: '🎨 判断推理', link: '/xingce/panduan/' },
        ]
      },
      { text: '📜 申论', link: '/shenlun/' },
      { text: '🅰 常识', link: '/changshi/' },
      { text: '📋 公基', link: '/gongji/' },
      { text: '🔧 工具', link: '/utils/' },
    ],

    // 侧边栏配置（按模块分组）
    sidebar: {
      '/xingce/ziliao/': [
        {
          text: '📊 资料分析',
          items: [
            { text: '概述', link: '/xingce/ziliao/' },
            { text: '增长率计算', link: '/xingce/ziliao/zengzhang' },
            { text: '比重计算', link: '/xingce/ziliao/bizhong' },
            { text: '平均数计算', link: '/xingce/ziliao/pingjun' },
            { text: '倍数计算', link: '/xingce/ziliao/beishu' },
            { text: '速算技巧', link: '/xingce/ziliao/susuan' },
          ]
        }
      ],
      // ... 其他模块侧边栏
    },

    // 页脚
    footer: {
      message: '与刷题系统数据同步',
      copyright: 'Copyright © 2024-2026 公考知识库'
    },

    // 本地搜索
    search: {
      provider: 'local',
      options: {
        translations: {
          button: { buttonText: '搜索文档' },
          modal: { noResultsText: '无法找到相关结果' }
        }
      }
    },

    // 中文本地化
    outline: { label: '页面导航', level: [2, 3] },
    docFooter: { prev: '上一页', next: '下一页' },
    lastUpdated: { text: '最后更新于' },
    returnToTopLabel: '回到顶部',
    sidebarMenuLabel: '菜单',
    darkModeSwitchLabel: '主题',
  }
})
```

---

## 五、自定义主题

### 5.1 主题入口 `docs/.vitepress/theme/index.ts`

```ts
import { h } from 'vue'
import type { Theme } from 'vitepress'
import DefaultTheme from 'vitepress/theme'
import './custom.css'

// 自定义组件
import TikuFrame from './components/TikuFrame.vue'

export default {
  extends: DefaultTheme,
  Layout: () => {
    return h(DefaultTheme.Layout, null, {})
  },
  enhanceApp({ app, router, siteData }) {
    // 注册全局组件
    app.component('TikuFrame', TikuFrame)
  }
} satisfies Theme
```

### 5.2 全局样式 `docs/.vitepress/theme/custom.css`

```css
/**
 * 公考知识库 - 自定义样式
 */

:root {
  /* 品牌色：绿色主题 */
  --vp-home-hero-name-color: transparent;
  --vp-home-hero-name-background: -webkit-linear-gradient(120deg, #3eaf7c 30%, #42b983);
  --vp-home-hero-image-background-image: linear-gradient(-45deg, #3eaf7c 50%, #42b983 50%);
  --vp-home-hero-image-filter: blur(44px);
}

/* 题库iframe容器 */
.tiku-frame-container {
  width: 100%;
  min-height: calc(100vh - 64px);
  border: none;
  border-radius: 8px;
  overflow: hidden;
}

.tiku-frame {
  width: 100%;
  height: calc(100vh - 100px);
  border: none;
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
}

/* 题库导航标签 */
.tiku-tabs {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
  padding: 8px 0;
  border-bottom: 1px solid var(--vp-c-divider);
}

.tiku-tab {
  padding: 8px 16px;
  border-radius: 6px;
  background: var(--vp-c-bg-soft);
  color: var(--vp-c-text-1);
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s;
}

.tiku-tab:hover {
  background: var(--vp-c-brand-soft);
  color: var(--vp-c-brand-1);
}

.tiku-tab.active {
  background: var(--vp-c-brand-1);
  color: white;
}

/* 加载状态 */
.tiku-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 400px;
  color: var(--vp-c-text-2);
}

.tiku-loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--vp-c-divider);
  border-top-color: var(--vp-c-brand-1);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
```

---

## 六、核心组件：TikuFrame

### 6.1 功能说明

`TikuFrame` 组件用于在知识库中嵌入题库系统，提供无缝的刷题体验。

### 6.2 组件实现 `TikuFrame.vue`

```vue
<script setup lang="ts">
import { ref, computed } from 'vue'

const props = defineProps<{
  path?: string
  height?: string
}>()

const loading = ref(true)
const error = ref(false)

// 题库系统地址
const tikuUrl = computed(() => {
  const baseUrl = 'http://localhost:5003'
  return props.path ? `${baseUrl}${props.path}` : baseUrl
})

const frameHeight = computed(() => props.height || 'calc(100vh - 120px)')

const onLoad = () => {
  loading.value = false
}

const onError = () => {
  loading.value = false
  error.value = true
}

const retry = () => {
  error.value = false
  loading.value = true
}
</script>

<template>
  <div class="tiku-frame-container">
    <!-- 加载状态 -->
    <div v-if="loading && !error" class="tiku-loading">
      <div class="tiku-loading-spinner"></div>
      <span>正在加载题库系统...</span>
    </div>
    
    <!-- 错误状态 -->
    <div v-if="error" class="tiku-error">
      <div class="tiku-error-icon">😕</div>
      <div class="tiku-error-message">
        无法连接到题库系统，请确保题库系统已启动
      </div>
      <div style="margin-bottom: 12px; color: var(--vp-c-text-3); font-size: 14px;">
        启动命令: <code>cd gongkao-tiku-system && python run.py</code>
      </div>
      <button class="tiku-error-btn" @click="retry">重试</button>
      <a :href="tikuUrl" target="_blank" class="tiku-error-btn secondary">
        在新窗口打开
      </a>
    </div>
    
    <!-- iframe -->
    <iframe 
      v-show="!loading && !error"
      :src="tikuUrl"
      class="tiku-frame"
      :style="{ height: frameHeight }"
      @load="onLoad"
      @error="onError"
      frameborder="0"
      allow="clipboard-write"
    ></iframe>
  </div>
</template>
```

### 6.3 使用方式

```vue
<!-- 嵌入题库首页 -->
<TikuFrame />

<!-- 嵌入专项练习页 -->
<TikuFrame path="/practice" height="calc(100vh - 200px)" />

<!-- 嵌入错题本页 -->
<TikuFrame path="/mistakes" height="calc(100vh - 200px)" />
```

---

## 七、首页配置

### 7.1 首页 `docs/index.md`

```md
---
layout: home

hero:
  name: "公考知识库"
  text: "行测申论备考指南"
  tagline: 无论你是初出茅庐的应届生，还是久经沙场的职场人士，本站始终为你的备考之旅保驾护航
  image:
    src: /hero-image.svg
    alt: 公考知识库
  actions:
    - theme: brand
      text: 📝 开始刷题
      link: /tiku/practice
    - theme: alt
      text: 📕 错题本
      link: /tiku/mistakes
    - theme: alt
      text: 📚 行测知识
      link: /xingce/ziliao/

features:
  - icon: 💡
    title: 精准定位，高效备考
    details: 内容融合了各大顶尖机构与考试领域专家的深度见解，保证信息的权威性、正确性。
  - icon: 📦
    title: 全面覆盖，深度解析
    details: 涵盖行测、申论等考试全科目基础知识点，内容广泛全面、清晰易查、通俗易懂。
  - icon: 🎉
    title: 刷题系统，智能分析
    details: 配套的刷题系统提供AI智能解析、错题本、薄弱项分析，让你精准定位问题。
  - icon: 🔄
    title: 持续更新，紧跟考情
    details: 持续关注考试动态，实时更新核心资料库与优化内容，确保获取最前沿备考资源。
---
```

---

## 八、题库功能页面

### 8.1 专项练习页 `docs/tiku/practice.md`

**功能截图**

选题界面：
- 顶部轮播Banner（每日一练）
- 知识点分类树（可展开折叠）
- 题数选择器（1/2/3/4/5/10/15/20题）
- 已选专项汇总区
- 预估总题数显示

![专项练习选题界面](./截屏2026-01-28%2008.23.10.png)

刷题界面：
- 题目显示区（题型标签+题干+选项）
- 答题卡侧边栏（题号导航+提交/暂停/返回按钮）
- 计时器
- 上一题/下一题导航
- 画布/清空工具按钮

![专项练习刷题界面](./截屏2026-01-28%2008.23.15.png)

答题结果/解析界面：
- 正确率环形图
- 正确/错误/未答统计
- 答案解析区（正确答案+你的答案+全站正确率+答题用时）
- 详细解析内容
- 题目来源标注

![答题结果解析界面](./截屏2026-01-28%2008.23.30.png)

### 8.2 练习记录页

**功能截图**

我的记录：
- 总练习次数
- 总练习题数
- 总答对题数
- 整体正确率（百分比显示）
- 练习历史列表（时间+用时+答题分布）

![练习记录页面](./截屏2026-01-28%2008.23.38.png)

### 8.3 错题本页 `docs/tiku/mistakes.md`

**功能截图**

我的错题：
- 按知识点分类显示错题
- 每个分类显示错题数量（红色角标）
- 开始练习按钮（针对该类错题进行练习）
- 连续答对2次自动移出

![错题本页面](./截屏2026-01-28%2008.23.42.png)

---

## 九、知识点分类体系

### 9.1 行测五大模块

```
行测
├── 📊 资料分析
│   ├── 增长率计算
│   ├── 比重计算
│   ├── 平均数计算
│   ├── 倍数计算
│   └── 速算技巧
│
├── 📖 言语理解
│   ├── 片段阅读
│   │   ├── 主旨概括
│   │   ├── 细节判断
│   │   ├── 词句理解
│   │   └── 态度观点
│   ├── 逻辑填空
│   │   ├── 实词填空
│   │   ├── 虚词填空
│   │   └── 成语填空
│   └── 语句表达
│       ├── 语句排序
│       └── 语句填充
│
├── 📏 数量关系
│   ├── 数字推理
│   └── 数学运算
│       ├── 工程问题
│       ├── 经济利润
│       ├── 行程问题
│       ├── 几何问题
│       ├── 容斥问题
│       ├── 排列组合
│       └── 概率问题
│
├── 🎨 判断推理
│   ├── 图形推理
│   │   ├── 平面规律
│   │   └── 空间重构
│   ├── 定义判断
│   ├── 类比推理
│   └── 逻辑判断
│       ├── 翻译推理
│       ├── 真假推理
│       ├── 组合排列
│       └── 加强削弱
│
└── 🧠 常识判断
    ├── 政治
    ├── 法律
    ├── 经济
    ├── 历史
    ├── 地理
    └── 科技
```

### 9.2 申论五大题型

```
申论
├── 📝 概括归纳
│   └── 提炼材料核心信息
├── 🔍 综合分析
│   └── 分析问题本质原因
├── 💡 提出对策
│   └── 针对问题提出解决方案
├── 📄 公文写作
│   └── 各类应用文写作
└── ✍️ 大作文
    └── 议论文写作技巧
```

---

## 十、启动与部署

### 10.1 开发环境启动

```bash
# 1. 进入知识库项目目录
cd gongkao-zhishiku

# 2. 安装依赖（首次）
npm install

# 3. 启动开发服务器
npm run docs:dev

# 默认运行在 http://localhost:5004
```

### 10.2 同时启动题库系统

```bash
# 新终端窗口
cd gongkao-tiku-system
python run.py

# 题库系统运行在 http://localhost:5003
```

### 10.3 构建生产版本

```bash
# 构建静态文件
npm run docs:build

# 预览构建结果
npm run docs:preview
```

### 10.4 部署说明

| 部署方式 | 说明 |
|----------|------|
| **静态部署** | 构建后的 `docs/.vitepress/dist` 可直接部署到任意静态服务器 |
| **题库系统** | 需要独立部署 Flask 应用，配置正确的 API 地址 |
| **跨域配置** | 生产环境需配置 iframe 的 CSP 策略 |

---

## 十一、与题库系统的集成

### 11.1 系统关系

```
┌──────────────────────────────────────────────────────────────┐
│                    用户访问入口                               │
│                  http://localhost:5004                       │
└──────────────────────────┬───────────────────────────────────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
         ▼                 ▼                 ▼
   ┌───────────┐    ┌───────────┐    ┌───────────┐
   │ 知识学习   │    │ 题库功能   │    │ 工具功能   │
   │ VitePress │    │  iframe   │    │ VitePress │
   │ 静态页面   │    │ 嵌入5003  │    │ 静态页面   │
   └───────────┘    └─────┬─────┘    └───────────┘
                          │
                          ▼
              ┌───────────────────────┐
              │   题库系统 (5003)      │
              │   Flask + SQLite      │
              │   ├── 专项练习         │
              │   ├── 错题本           │
              │   └── 统计分析         │
              └───────────────────────┘
```

### 11.2 数据流向

1. **刷题数据**：用户在知识库内嵌的题库系统中做题
2. **错题收集**：错题自动保存到题库系统数据库
3. **统计分析**：题库系统生成正确率、薄弱项等统计
4. **知识链接**：解析中可链接到知识库相关知识点

---

## 十二、后续规划

### 12.1 待完善功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 词语查询 | 开发中 | 快速查询易混词语辨析 |
| 公式计算器 | 规划中 | 资料分析速算工具 |
| 知识图谱 | 规划中 | 可视化知识点关联 |
| 移动端适配 | 优化中 | 响应式布局优化 |

### 12.2 内容扩展

- [ ] 完善资料分析各类型计算详解
- [ ] 补充言语理解题型技巧
- [ ] 增加数量关系典型题型
- [ ] 丰富判断推理图形规律
- [ ] 更新常识判断时政热点

---

## 十三、相关文档

- [题库系统设计文档](./DESIGN_题库系统.md)
- [需求确认清单](./需求确认清单.md)
- [系统对齐文档](./ALIGNMENT_题库系统.md)
- [任务拆分文档](./TASK_题库系统.md)

---

*文档版本：v1.0*
*更新时间：2026-01-28*
