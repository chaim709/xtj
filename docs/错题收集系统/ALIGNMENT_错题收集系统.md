# 线下机构学员错题收集系统 - 需求对齐文档

**创建时间**: 2026-01-29
**项目代号**: cuoti-system (错题收集系统)

---

## 一、原始需求

用户是一家线下公考培训机构，需要一套系统来：
1. 将总部资料或网上找的习题清洗入库
2. 生成带二维码的纸质习题册
3. 学员做完纸质题目后扫码标记错题
4. 收集学员错题数据用于分析辅导

**核心痛点**：现有资料无法帮助学员整理错题，线下做题与线上数据收集断层。

---

## 二、需求边界

### 在范围内 (In Scope)

| 功能模块 | 描述 |
|---------|------|
| 题目管理 | 导入、清洗、分类、标注考点、编辑题目 |
| 题册管理 | 创建题册/试卷、按专题/套卷组织题目 |
| 题册生成 | 生成带二维码的PDF/Word，支持打印 |
| 扫码录题 | H5页面，学员扫码勾选错题 |
| 错题收集 | 按学员汇总错题、查看错题详情 |
| 简单分析 | 学员错题分布、薄弱点统计 |

### 不在范围内 (Out of Scope)

| 功能 | 原因 |
|------|------|
| 在线做题 | 学员线下做纸质题目 |
| 复杂考试系统 | 市面上已有成熟方案 |
| 学员账号体系 | 暂时只需姓名+手机号 |
| 支付/会员系统 | 非核心需求 |
| APP开发 | H5页面足够，扫码即用 |

---

## 三、业务流程

```
┌─────────────────────────────────────────────────────────────────┐
│                        管理员端                                   │
├─────────────────────────────────────────────────────────────────┤
│  1. 导入资料          2. 清洗入库           3. 创建题册          │
│  (Word/PDF/Excel)  →  (标注考点/分类)   →  (组织题目/设置)      │
│                                                ↓                 │
│                                         4. 生成PDF/Word         │
│                                         (每页带二维码)           │
│                                                ↓                 │
│                                         5. 打印发给学员          │
└─────────────────────────────────────────────────────────────────┘
                                                 ↓
┌─────────────────────────────────────────────────────────────────┐
│                        学员端 (H5)                               │
├─────────────────────────────────────────────────────────────────┤
│  1. 做纸质题目   →   2. 扫描页面二维码   →   3. 填写信息         │
│                                              (姓名+手机号)        │
│                                                ↓                 │
│                                         4. 勾选错题题号          │
│                                                ↓                 │
│                                         5. 提交 → 查看解析       │
└─────────────────────────────────────────────────────────────────┘
                                                 ↓
┌─────────────────────────────────────────────────────────────────┐
│                        管理员端 - 数据                           │
├─────────────────────────────────────────────────────────────────┤
│  1. 查看学员错题   →   2. 错题分布分析   →   3. 导出错题报告     │
└─────────────────────────────────────────────────────────────────┘
```

---

## 四、功能详细说明

### 4.1 题目管理

**数据结构**：
- 题目编号 (UID)
- 题干 (stem)
- 选项A/B/C/D
- 正确答案
- 解析
- 考点/知识点
- 难度
- 来源 (哪份资料)
- 分类 (一级/二级/三级)

**操作**：
- 批量导入 (复用现有清洗脚本)
- 单题录入
- 编辑修改
- 删除

### 4.2 题册管理

**题册属性**：
- 题册名称 (如: "2026江苏省考-常识判断专项100题")
- 题册类型 (专项练习/模拟套卷/真题)
- 包含题目列表
- 每页题目数量 (可配置)
- 创建时间

**操作**：
- 创建题册
- 添加/移除题目
- 调整题目顺序
- 预览题册
- 生成PDF/Word

### 4.3 题册生成

**生成规则**：
- 每页固定数量题目 (如5题/页)
- 每页底部放置二维码
- 二维码包含: 题册ID + 页码 + 题目范围
- 支持输出: PDF / Word / 直接打印

**页面布局示例**：
```
┌────────────────────────────────────────┐
│  常识判断专项100题           第1页      │
├────────────────────────────────────────┤
│  1. 题干内容...                        │
│     A. 选项A    B. 选项B               │
│     C. 选项C    D. 选项D               │
│                                        │
│  2. 题干内容...                        │
│     A. 选项A    B. 选项B               │
│     C. 选项C    D. 选项D               │
│                                        │
│  ... (共5题)                           │
│                                        │
├────────────────────────────────────────┤
│  [二维码]  扫码提交错题 | 第1-5题      │
└────────────────────────────────────────┘
```

### 4.4 扫码录题 (H5页面)

**流程**：
1. 学员扫描二维码 → 打开H5页面
2. 页面显示: 题册名称 + 当前页题目范围
3. 学员填写: 姓名 + 手机号 (首次填写后记住)
4. 显示题目列表，勾选做错的题目
5. 提交 → 显示错题解析

**界面特点**：
- 简洁大方，手机友好
- 记住用户信息 (localStorage)
- 可查看历史提交记录

### 4.5 错题收集与分析

**管理员视图**：
- 按学员查看: 某学员的所有错题
- 按题册查看: 某题册的错题分布
- 按题目查看: 某道题的错误率
- 按知识点查看: 各知识点错误分布

**数据导出**：
- 学员错题报告 (PDF/Excel)
- 题册错题统计

---

## 五、技术方案

### 5.1 技术栈

| 层级 | 技术选型 |
|------|---------|
| 后端框架 | Flask + SQLAlchemy |
| 数据库 | SQLite (开发) / MySQL (生产) |
| 前端 | Bootstrap 5 + 原生JS |
| H5页面 | 响应式设计，手机优先 |
| PDF生成 | WeasyPrint / reportlab |
| Word生成 | python-docx |
| 二维码 | qrcode 库 |

### 5.2 现有资源复用

- 题目数据模型 (可复用，需简化)
- 题目清洗脚本 (可复用)
- 已导入的6705道题目 (可保留)

### 5.3 系统部署

- 本地开发: Flask 内置服务器
- 生产部署: 需要公网服务器 (二维码需要可访问的URL)

---

## 六、待确认问题

1. **二维码URL**: 
   - 是否有公网服务器？
   - 或者先用内网IP测试？

2. **题册模板**:
   - 是否需要显示答案/解析在题册上？
   - 还是只有题目，答案在扫码后显示？

3. **现有数据**:
   - 已导入的6705道题目是否保留？
   - 还是全部删除重新开始？

---

## 七、验收标准

1. 能导入题目并分类管理
2. 能创建题册并组织题目
3. 能生成带二维码的PDF/Word
4. 学员扫码能勾选错题并提交
5. 管理员能查看学员错题数据
6. 界面简洁，操作流畅

---

**文档状态**: 待确认
**下一步**: 确认上述问题后进入架构设计阶段
